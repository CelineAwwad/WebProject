<!-- ========================================
     PAGE HEADER
     ======================================== -->
<header class="page-head">
  <h1 class="page-title">Clients</h1>
  <div class="actions">
    <select class="filter-select" id="filterSelect">
      <option value="">Sort by...</option>
      <option value="az">A → Z</option>
      <option value="za">Z → A</option>
      <option value="newest">Newest</option>
      <option value="oldest">Oldest</option>
    </select>
    <button class="btn btn-primary btn--lg" id="btn-add-client">Add Client</button>
  </div>
</header>

<!-- ========================================
     CLIENTS TABLE
     ======================================== -->
<section class="card">
  <div class="table-wrap">
    <table class="table" id="clientsTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>@Username</th>
          <th>Niche</th>
          <th>Status</th>
          <th>Base Price</th>
          <th>#Active Campaigns</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% if (clients && clients.length > 0) { %>
          <% clients.forEach(client => { %>
            <tr class="row" data-created="<%= client.created_at %>" data-client-id="<%= client.client_id %>">
              <td class="cell name">
                <img class="avatar" src="<%= client.avatar || 'https://via.placeholder.com/150' %>" alt="<%= client.user_name %>">
                <div class="namebox">
                  <span class="namebox__title"><%= client.user_name %></span>
                  <span class="namebox__sub">Creator</span>
                </div>
              </td>
              <td class="cell handle">@<%= client.username || 'N/A' %></td>
              <td class="cell niche"><%= client.niche || 'Unassigned' %></td>
              <td class="cell">
                <% if (client.status === 'Active') { %>
                  <span class="pill pill--active">Active</span>
                <% } else if (client.status === 'Pending') { %>
                  <span class="pill pill--pending">Pending</span>
                <% } else { %>
                  <span class="pill pill--inactive">Inactive</span>
                <% } %>
              </td>
              <td class="cell price">$<%= client.base_price || '0.00' %></td>
              <td class="cell count"><%= client.activeCampaigns || 0 %></td>
              <td class="cell col-actions">
                <button class="link" data-action="view" data-client-id="<%= client.client_id %>">View</button>
              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="7" style="text-align: center; padding: 40px;">
              No clients yet. Click "Add Client" to get started!
            </td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</section>

<!-- ========================================
     ADD CLIENT MODAL
     ======================================== -->
<div id="addClientModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Add New Client</h2>
      <span class="close" data-modal="addClientModal">&times;</span>
    </div>
    <form id="addClientForm">
      <div class="form-group">
        <label for="tiktokLink">TikTok Link *</label>
        <input type="url" id="tiktokLink" name="tiktok_link" placeholder="https://www.tiktok.com/@username" required>
        <small class="form-hint">We'll automatically extract the @username and profile picture</small>
        <span class="error-message" id="tiktokError"></span>
      </div>

      <div class="form-group">
        <label for="clientName">Name *</label>
        <input type="text" id="clientName" name="client_name" placeholder="Creator Name" required>
      </div>

      <div class="form-group">
        <label for="basePrice">Base Price *</label>
        <input type="number" id="basePrice" name="base_price" placeholder="0.00" step="0.01" min="0" required>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" data-modal="addClientModal">Cancel</button>
        <button type="submit" class="btn btn-primary">Save Client</button>
      </div>
    </form>
  </div>
</div>

<!-- ========================================
     VIEW/EDIT CLIENT MODAL
     ======================================== -->
<div id="viewClientModal" class="modal">
  <div class="modal-content modal-content--large">
    <div class="modal-header">
      <h2 id="modalTitle">Client Details</h2>
      <span class="close" data-modal="viewClientModal">&times;</span>
    </div>
    <form id="editClientForm">
      <input type="hidden" id="editClientId" name="client_id">
      
      <div class="form-row">
        <div class="form-group">
          <label for="editTiktokLink">TikTok Link *</label>
          <input type="url" id="editTiktokLink" name="tiktok_link" required disabled>
        </div>
        <div class="form-group">
          <label for="editClientName">Name *</label>
          <input type="text" id="editClientName" name="client_name" required disabled>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="editBasePrice">Base Price *</label>
          <input type="number" id="editBasePrice" name="base_price" step="0.01" min="0" required disabled>
        </div>
        <div class="form-group">
          <label for="editStatus">Status</label>
          <select id="editStatus" name="status" disabled>
            <option value="Pending">Pending</option>
            <option value="Active">Active</option>
            <option value="Inactive">Inactive</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label for="editNiches">Assign to Niches</label>
        <select id="editNiches" name="niches" multiple class="multi-select" disabled>
          <!-- Options populated dynamically -->
        </select>
        <small class="form-hint">Hold Ctrl/Cmd to select multiple</small>
      </div>

      <div class="form-group">
        <label for="editCampaigns">Assign to Campaigns</label>
        <select id="editCampaigns" name="campaigns" multiple class="multi-select" disabled>
          <!-- Options populated dynamically -->
        </select>
      </div>

      <div class="form-actions" id="viewModeActions">
        <button type="button" class="btn btn-danger" id="deleteClientBtn">Delete Client</button>
        <div style="margin-left: auto; display: flex; gap: 10px;">
          <button type="button" class="btn btn-secondary" data-modal="viewClientModal">Close</button>
          <button type="button" class="btn btn-warning" id="editModeBtn">Edit Client</button>
        </div>
      </div>

      <div class="form-actions" id="editModeActions" style="display: none;">
        <button type="button" class="btn btn-secondary" id="cancelEditBtn">Cancel</button>
        <div style="margin-left: auto;">
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </div>
    </form>
  </div>
</div>